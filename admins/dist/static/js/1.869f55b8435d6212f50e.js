webpackJsonp([1],{"+MW7":function(t,s){},U3aG:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("uEhY"),i=a("xzgJ"),n=a("G7MN"),c={data:()=>({cur:0,comid:"",companyList:[],selCompany:{},isableSelect:!0,bblist:[],editAttr:"",cid:"",cyear:""}),components:{sbsupload:e.a},mounted(){if(this.$route.query.cur&&(this.cur=parseInt(this.$route.query.cur)),this.$route.query.id){this.comid=this.$route.query.id,this.getCompanyInfo();this.comid;this.cid=this.comid,1==this.cur&&(this.cyear=2016),2==this.cur&&(this.cyear=2017),3==this.cur&&(this.cyear=2018),this.cur>0&&this.cur<4&&this.getlists(),this.$route.query.edit&&(this.isableSelect=!1,this.editAttr=1)}this.getCompanys()},methods:{updatelist(){this.getlists()},getlists(){this.$http.get("financial/bbService/bbList?qyId="+this.cid+"&year="+this.cyear).then(t=>{this.bblist=t.data.data})},addCompany(){let t=this;this.$mymsg(i.a,{data:{openType:1},methods:{onOk(){t.getCompanys()}}})},getCompanyInfo(){this.$http.post("financial/companyService/infoCompany",{subData:this.comid}).then(t=>{this.selCompany=t.data.data})},getCompanys(){this.$http.post("financial/companyService/list",{subData:{pageNum:1,pageSize:1e3,searchText:""}}).then(t=>{this.companyList=t.data.data.list})},productReport(){let t=this;this.$mymsg(n.a,{data:{message:"you click me btn1",qyId:t.comid},methods:{onOk(){alert("回调")},onBuy(){t.$router.push({name:"miyaoMgr"})},updateList(){},viewbb(){alert("回调")}}})},viewUploed(t){window.open(t.oss_url)},viewmb(t){window.open(t.bb_model)},changeSetp(t){if(!this.selCompany.id)return this.$Message.error("请选择企业"),!1;this.$router.push({name:"uploadData",query:{cur:t,id:this.selCompany.id,edit:this.editAttr}})}}},l={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",[e("Row",{staticClass:"newStep"},[e("Col",{attrs:{span:"4"}},[t._v("\n       \n         ")]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("div",{staticClass:"setpItem",class:1==t.cur?"setpCur":"",on:{click:function(s){t.changeSetp(1)}}},[e("div",{staticClass:"setpc"},[e("div",{staticClass:"icon icon2"}),t._v(" "),e("div",{staticClass:"icon_text"},[t._v("2016年数据")])])])]),t._v(" "),e("Col",{attrs:{span:"1"}},[e("div",{staticClass:"jt"},[e("img",{attrs:{src:a("sN7e")}})])]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("div",{staticClass:"setpItem",class:2==t.cur?"setpCur":"",on:{click:function(s){t.changeSetp(2)}}},[e("div",{staticClass:"setpc"},[e("div",{staticClass:"icon icon2"}),t._v(" "),e("div",{staticClass:"icon_text"},[t._v("2017年数据")])])])]),t._v(" "),e("Col",{attrs:{span:"1"}},[e("div",{staticClass:"jt"},[e("img",{attrs:{src:a("sN7e")}})])]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("div",{staticClass:"setpItem",class:3==t.cur?"setpCur":"",on:{click:function(s){t.changeSetp(3)}}},[e("div",{staticClass:"setpc"},[e("div",{staticClass:"icon icon2"}),t._v(" "),e("div",{staticClass:"icon_text"},[t._v("2018年数据")])])])]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("\n       \n      ")])],1)],1),t._v(" "),e("div",{staticClass:"stepcon"},[0==t.cur?e("div",{staticClass:"con0"},[e("br"),e("br"),e("br"),e("br"),t._v(" "),e("div",{staticClass:"companys"},[e("Form",{attrs:{"label-width":80}},[e("FormItem",{attrs:{label:"选择企业"}},[e("Select",{attrs:{disabled:!t.isableSelect},model:{value:t.selCompany.id,callback:function(s){t.$set(t.selCompany,"id",s)},expression:"selCompany.id"}},t._l(t.companyList,function(s,a){return e("Option",{key:a,attrs:{disabled:!s.ableDelete,value:s.id}},[t._v(t._s(s.company_name)+"\n             ")])}))],1)],1)],1)]):t._e(),t._v(" "),1==t.cur?e("div",{staticClass:"con1"},[e("div",{staticClass:"uptips"},[e("div",{staticClass:"selName"},[e("h3",[t._v(t._s(t.selCompany.company_name))]),t._v(" "),e("p",[e("span",{directives:[{name:"show",rawName:"v-show",value:1==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 1"}]},[t._v("企业会计准则企业")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 2"}]},[t._v("小企业会计准则企业")])])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"uptable"},t._l(t.bblist,function(s){return e("div",{staticClass:"rowsh"},[e("Row",{attrs:{gutter:20,type:"flex"}},[e("Col",{attrs:{span:"6"}},[t._v(t._s(s.bb_mc))]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("a",{staticClass:"downexl",on:{click:function(a){t.viewmb(s)}}},[t._v("模版下载")])]),t._v(" "),e("Col",{attrs:{span:"12"}},[s.file_name?[e("Badge",{attrs:{status:"success",text:"已上传"}}),e("i",{staticClass:"viewexl",on:{click:function(a){t.viewUploed(s)}}},[e("a",[t._v(t._s(s.file_name))])])]:t._e(),t._v(" "),s.file_name?t._e():[e("Badge",{attrs:{status:"error",text:"未上传"}}),e("i",{staticClass:"viewexl"},[e("a",[t._v(t._s(s.file_name))])])]],2)],1)],1)}))]),t._v(" "),e("br")]):t._e(),t._v(" "),2==t.cur?e("div",{staticClass:"con1"},[e("div",{staticClass:"uptips"},[e("div",{staticClass:"selName"},[e("h3",[t._v(t._s(t.selCompany.company_name))]),t._v(" "),e("p",[e("span",{directives:[{name:"show",rawName:"v-show",value:1==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 1"}]},[t._v("企业会计准则企业")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 2"}]},[t._v("小企业会计准则企业")])])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"uptable"},t._l(t.bblist,function(s){return e("div",{staticClass:"rowsh"},[e("Row",{attrs:{gutter:20,type:"flex"}},[e("Col",{attrs:{span:"6"}},[t._v(t._s(s.bb_mc))]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("a",{staticClass:"downexl",on:{click:function(a){t.viewmb(s)}}},[t._v("模版下载")])]),t._v(" "),e("Col",{attrs:{span:"12"}},[s.file_name?[e("Badge",{attrs:{status:"success",text:"已上传"}}),e("i",{staticClass:"viewexl"},[e("a",{on:{click:function(a){t.viewUploed(s)}}},[t._v(t._s(s.file_name))])])]:t._e(),t._v(" "),s.file_name?t._e():[e("Badge",{attrs:{status:"error",text:"未上传"}}),e("i",{staticClass:"viewexl"},[e("a",[t._v(t._s(s.file_name))])])]],2)],1)],1)}))]),t._v(" "),e("br")]):t._e(),t._v(" "),3==t.cur?e("div",{staticClass:"con1"},[e("div",{staticClass:"uptips"},[e("div",{staticClass:"selName"},[e("h3",[t._v(t._s(t.selCompany.company_name))]),t._v(" "),e("p",[e("span",{directives:[{name:"show",rawName:"v-show",value:1==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 1"}]},[t._v("企业会计准则企业")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2==t.selCompany.accountant_rule,expression:"selCompany.accountant_rule == 2"}]},[t._v("小企业会计准则企业")])])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"uptable"},t._l(t.bblist,function(s){return e("div",{staticClass:"rowsh"},[e("Row",{attrs:{gutter:20,type:"flex"}},[e("Col",{attrs:{span:"6"}},[t._v(t._s(s.bb_mc))]),t._v(" "),e("Col",{attrs:{span:"4"}},[e("a",{staticClass:"downexl",on:{click:function(a){t.viewmb(s)}}},[t._v("模版下载")])]),t._v(" "),e("Col",{attrs:{span:"12"}},[s.file_name?[e("Badge",{attrs:{status:"success",text:"已上传"}}),e("i",{staticClass:"viewexl"},[e("a",{on:{click:function(a){t.viewUploed(s)}}},[t._v(t._s(s.file_name))])])]:t._e(),t._v(" "),s.file_name?t._e():[e("Badge",{attrs:{status:"error",text:"未上传"}}),e("i",{staticClass:"viewexl"},[e("a",[t._v(t._s(s.file_name))])])]],2)],1)],1)}))]),t._v(" "),e("br")]):t._e(),t._v(" "),4==t.cur?e("div",{staticClass:"con1"},[e("br"),e("br"),e("br"),e("br"),t._v(" "),e("div",{staticClass:"complete"},[e("h3",[e("Icon",{attrs:{type:"md-checkmark-circle-outline",size:"30",color:"#08F"}}),t._v("恭喜您完成填写")],1),t._v(" "),e("p",[t._v("请确保数据上传完整性")]),t._v(" "),e("p",[e("Button",{attrs:{size:"large",icon:"ios-hammer",type:"primary"},on:{click:t.productReport}},[t._v("马上生成评测报告")])],1)])]):t._e()])])},staticRenderFns:[]};var o=a("VU/8")(c,l,!1,function(t){a("+MW7")},"data-v-710e9b6c",null);s.default=o.exports},mWTi:function(t,s){},sN7e:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAAJCAYAAACBiSRSAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAALlJREFUSIndlCEKAmEQhb9fFqPFIF7BIN7AQ8wBBLMiewG7RbzIs3oFi4gMiCAGLTarwWJYFxbd6Lq4X5t5DLzhwQvuzj8j6WNnZi2gKWmfd1Mr2lRJtIGdmc3NrPEuVvVpgAiIgaOZDcwspEJw9ykwLM1aMdRJ0s6yBkaSNsHdF8Dk975K4Q70I+AGnEs2823ykl4BY0mnUNH27gHb13gBYknLVK9ykT2AGdDJPgxJw1WRK9CVdMgTn4ugNKhOYJJGAAAAAElFTkSuQmCC"},uEhY:function(t,s,a){"use strict";var e=a("qI5z"),i={props:["tipText","uploadDone","bbid","qyid"],data:()=>({file:null}),methods:{getFile(t){this.file=t.target.files[0],console.log(this.file),this.submitForm()},submitForm(t){let s=new FormData;s.append("bbId",this.bbid),s.append("qyId",this.qyid),s.append("file",this.file);let a=this;this.$Spin.show({render:t=>t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","上传中,请稍后")])}),this.$http.post(e.d+"financial/bbService/importData",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.$Spin.hide(),1!=t.data.code?(a.$refs.uploads.value="",alert(t.data.msg)):(a.$Message.success("上传成功"),a.$emit("updatelist"))},t=>{a.$Spin.hide(),a.$refs.uploads.value="",alert(t.data.message)})}}},n={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticStyle:{margin:"0 auto"}},[a("div",[a("form",{attrs:{"accept-charset":"GBK"}},[a("div",{staticClass:"ucontent"},[a("Button",{attrs:{type:"primary",ghost:"",size:"small"}},[a("Icon",{attrs:{type:"ios-cloud-upload"}}),t._v("\n          上传")],1),t._v(" "),a("input",{ref:"uploads",staticClass:"realfile",attrs:{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:function(s){t.getFile(s)}}})],1)])])])},staticRenderFns:[]};var c=a("VU/8")(i,n,!1,function(t){a("mWTi")},"data-v-364d8458",null);s.a=c.exports}});