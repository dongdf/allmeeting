webpackJsonp([16],{"F/0w":function(t,e){},cLuP:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("afWL"),i=s("giHb"),r=s("qI5z"),o=s("cPLa"),n={name:"report-mgr",data:()=>({value3:3,rtotal:0,psize:100,pnumb:1,keywords:"",repList:[],userinfo:{}}),components:{sendReport:a.a,no:o.a},mounted(){this.getreportList(),this.getuser()},methods:{getuser(){this.$http.post("financial/userService/getCurUser").then(t=>{this.userinfo=t.data,this.userinfo.password||this.showtips()})},showtips(){let t=this;this.$mymsg(i.a,{data:{message:"您还没有设置密码，点击确定去设置"},methods:{onOk(){t.$router.push({name:"editPas"})}}})},searchcom(){this.pnumb=1,this.getreportList()},getreportList(){this.$http.post("financial/reportService/reportList",{subData:{pageNum:this.pnumb,pageSize:this.psize,companyName:this.keywords}}).then(t=>{this.repList=t.data.data.list,this.rtotal=t.data.data.total})},delcj(t){let e=this;this.$mymsg(i.a,{data:{message:"确定删除此条报告吗？"},methods:{onOk(){e.$http.get("financial/reportService/deleteReport?qyId="+t.qy_id+"&year=2018").then(s=>{if(1!=s.data.code)e.$Message.error(s.data.msg);else{var a=e.repList.findIndex(function(e){return e.companyId==t.companyId});e.repList.splice(a,1)}})}}})},godata(t){window.open(r.b+"#/bbview/uploadData?edit=1&id="+t.qy_id+"&cur=1")},gozjDetail(t){t.simple_summary_url?window.open(t.simple_summary_url):this.$http.get("financial/reportService/result2Html?type=2&year="+t.nf+"&companyId="+t.qy_id).then(e=>{if(1!=e.data.code)this.$Message.error(e.data.msg);else{var s=this.repList.findIndex(function(e){return e.qy_id==t.qy_id});this.repList[s].simple_summary_url=e.data.data,window.open(e.data.data)}})},godetail(t){t.pc_url?window.open(t.pc_url):this.$http.get("financial/reportService/result2Html?type=0&year="+t.nf+"&companyId="+t.qy_id).then(e=>{if(1!=e.data.code)this.$Message.error(e.data.msg);else{var s=this.repList.findIndex(function(e){return e.qy_id==t.qy_id});this.repList[s].pc_url=e.data.data,window.open(e.data.data)}})},gosimpleDetail(t){t.simple_url?window.open(t.simple_url):this.$http.get("financial/reportService/result2Html?type=1&year="+t.nf+"&companyId="+t.qy_id).then(e=>{if(1!=e.data.code)this.$Message.error(e.data.msg);else{var s=this.repList.findIndex(function(e){return e.qy_id==t.qy_id});this.repList[s].simple_url=e.data.data,window.open(e.data.data)}})},change:function(t){console.log(t),this.pnumb=t,this.getreportList()},sendMsg(t){this.$mymsg(a.a,{data:{message:"you click me btn1",cids:t.qy_id,sendurl:t.pc_url},methods:{onOk(){}}})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",{staticStyle:{"border-bottom":"2px solid #EEE","padding-bottom":"10px"}},[s("Col",{attrs:{span:"18"}},[s("div",{staticClass:"cpageTitle"},[s("Icon",{attrs:{size:"20",type:"ios-document"}}),s("span",[t._v("报告查看")])],1)]),t._v(" "),s("Col",{staticStyle:{"text-align":"right"},attrs:{span:"6"}},[s("Input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[s("Icon",{attrs:{type:"ios-search"}})],1),t._v(" "),s("span",{attrs:{slot:"append"},slot:"append"},[s("Button",{attrs:{type:"primary"},on:{click:t.searchcom}},[t._v("搜索")])],1)])],1)],1),t._v(" "),t._l(t.repList,function(e,a){return s("Row",{key:a,staticClass:"iv_row"},[s("Col",{attrs:{span:"1"}},[s("Icon",{staticStyle:{opacity:".2"},attrs:{size:"40",type:"ios-document"}})],1),t._v(" "),s("Col",{attrs:{span:"8"}},[s("div",{staticClass:"iv_info"},[s("h3",[t._v(t._s(e.report_name))]),t._v(" "),s("p",[t._v("公司名称："+t._s(e.company_name))]),t._v(" "),s("p")])]),t._v(" "),s("Col",{attrs:{span:"9"}},[s("Row",{staticClass:"yearc",attrs:{type:"flex",justify:"center"}},[s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"yearc_c"},[s("p",{staticClass:"t1"},[t._v("税负指标")]),t._v(" "),s("p",[s("Badge",{attrs:{status:"default",text:e.sf_value+"分"}})],1)])]),t._v(" "),s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"yearc_c"},[s("p",{staticClass:"t1"},[t._v("税源指标")]),t._v(" "),s("p",[s("Badge",{attrs:{status:"default",text:e.sy_value+"分"}})],1)])]),t._v(" "),s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"yearc_c"},[s("p",{staticClass:"t1"},[t._v("项目指标")]),t._v(" "),s("p",[s("Badge",{attrs:{status:"default",text:e.xm_value+"分"}})],1)])]),t._v(" "),s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"yearc_c"},[s("p",{staticClass:"t1"},[t._v("税收风险")]),t._v(" "),s("p",{},[s("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf<=3,expression:"r.zh_pf<=3"}],attrs:{status:"success",text:"一级"}}),t._v(" "),s("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf>3&&e.zh_pf<=7,expression:"r.zh_pf>3 && r.zh_pf<=7"}],attrs:{status:"warning",text:"二级"}}),t._v(" "),s("Badge",{directives:[{name:"show",rawName:"v-show",value:e.zh_pf>7,expression:"r.zh_pf>7"}],attrs:{status:"error",text:"三级"}})],1)])])],1)],1),t._v(" "),s("Col",{attrs:{span:"6"}},[s("div",{staticClass:"edits"},[s("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(s){t.godetail(e)}}},[t._v("报告详情")]),t._v(" "),s("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(s){t.gosimpleDetail(e)}}},[t._v("简要报告")]),t._v(" "),s("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(s){t.gozjDetail(e)}}},[t._v("总结报告")]),t._v(" "),s("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(s){t.godata(e)}}},[t._v("数据源")])],1)])],1)}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.repList.length>0,expression:"repList.length >0 "}],staticClass:"pager"},[s("Page",{attrs:{total:t.rtotal,current:t.pnumb,"page-size":t.psize,"show-total":""},on:{"on-change":t.change}})],1),t._v(" "),s("no",{directives:[{name:"show",rawName:"v-show",value:0==t.repList.length,expression:"repList.length == 0"}],attrs:{tipText:"暂无记录"}})],2)},staticRenderFns:[]};var l=s("VU/8")(n,p,!1,function(t){s("F/0w")},"data-v-6abc0259",null);e.default=l.exports}});