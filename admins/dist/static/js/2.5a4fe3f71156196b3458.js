webpackJsonp([2],{Eewh:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:()=>({actives:2,timer:120,isSend:!1,sendText:"",codeForm:{phone:"",phoneCode:""},codeLoginRule:{phone:[{required:!0,message:"请输入用户名",trigger:"blur"}],phoneCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},passForm:{phone:"",password:""},passLoginRule:{phone:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}),mounted(){},methods:{sendSMS(){return this.$options.filters.isphone(this.codeForm.phone)?!this.isSend&&(this.isSend=!0,this.sendText=this.timer+"S后重新发送",void this.$http.post("financial/userService/login/sendSMS",{subData:{mobile:this.codeForm.phone}}).then(e=>{if(1!=e.data.code)this.isSend=!1,this.$Message.info(e.data.msg);else var t=setInterval(()=>{this.timer--,this.sendText=this.timer+"S后重新发送",1==this.timer&&(this.isSend=!1,clearInterval(t))},1e3)})):(this.$Message.info("手机号格式错误"),!1)},changeLogin(e){this.actives=e},handleSubmit(e){"codeLogin"==e?this.$refs[e].validate(e=>{e?this.$http.post("financial/userService/login/loginUser",{subData:{mobile:this.codeForm.phone,code:this.codeForm.phoneCode}}).then(e=>{1!=e.data.code?this.$Message.error(e.data.msg):(localStorage.setItem("user",this.codeForm.phone),localStorage.setItem("sid",e.data.data),1==e.data.data?this.$router.push({name:"main"}):this.$router.push({name:"reportMgrAdmin"}))}):this.$Message.error("登录失败!")}):this.$refs[e].validate(e=>{if(e){var t={username:this.passForm.phone,password:this.passForm.password};this.$http.post("login",t).then(e=>{200==e.data.status?(localStorage.setItem("user",e.data.data.nickname),this.$router.push({name:"main"})):this.$Message.error(e.data.msg)})}else this.$Message.error("登录失败!")})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginbg"},[s("div",{staticClass:"logincontent"},[e._m(0),e._v(" "),s("div",{staticClass:"loginbox"},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.actives,expression:"actives == 1"}]},[s("Form",{ref:"codeLogin",attrs:{model:e.codeForm,rules:e.codeLoginRule}},[s("FormItem",{attrs:{prop:"phone"}},[s("Input",{attrs:{type:"text",placeholder:"请输入手机号"},model:{value:e.codeForm.phone,callback:function(t){e.$set(e.codeForm,"phone",t)},expression:"codeForm.phone"}},[s("Icon",{attrs:{slot:"prepend",type:"md-phone-portrait"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{prop:"phoneCode"}},[s("Input",{attrs:{type:"text",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleSubmit("codeLogin")}},model:{value:e.codeForm.phoneCode,callback:function(t){e.$set(e.codeForm,"phoneCode",t)},expression:"codeForm.phoneCode"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-mail"},slot:"prepend"}),e._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:!e.isSend,expression:"!isSend"}],attrs:{slot:"append"},on:{click:e.sendSMS},slot:"append"},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isSend,expression:"isSend"}],attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.sendText))])],1)],1),e._v(" "),s("FormItem",[s("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.handleSubmit("codeLogin")}}},[e._v("登录")])],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.actives,expression:"actives == 2"}]},[s("Form",{ref:"passLogin",attrs:{model:e.passForm,rules:e.passLoginRule}},[s("FormItem",{attrs:{prop:"phone"}},[s("Input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.passForm.phone,callback:function(t){e.$set(e.passForm,"phone",t)},expression:"passForm.phone"}},[s("Icon",{attrs:{slot:"prepend",type:"md-phone-portrait"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleSubmit("passLogin")}},model:{value:e.passForm.password,callback:function(t){e.$set(e.passForm,"password",t)},expression:"passForm.password"}},[s("Icon",{attrs:{slot:"prepend",type:"md-key"},slot:"prepend"})],1)],1),e._v(" "),s("FormItem",[s("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.handleSubmit("passLogin")}}},[e._v("登录")])],1)],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login_banner"},[t("div",{staticClass:"login_text "},[t("h3",[this._v("用户登录")])]),this._v(" "),t("div",{staticClass:"cl"})])}]};var a=s("VU/8")(o,r,!1,function(e){s("zqA3")},"data-v-62c36595",null);t.default=a.exports},zqA3:function(e,t){}});